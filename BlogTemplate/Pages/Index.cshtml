@page
@model IndexModel
@{
    ViewData["Title"] = "Home Page";

    foreach (var post in Model.Blog.Posts)
    {
        if (post.IsPublic)
        {
            <article>
                @{
                    int count = 0;
                    foreach (var comment in post.Comments)
                    {
                        if (comment.IsPublic)
                        {
                            count++;
                        }
                    }
                }
                <h2><a href="/post/@post.Slug">@post.Title</a></h2>
                <p class="date">@post.PubDate.ToLocalTime().ToShortDateString()</p>
                <p>@post.Excerpt</p>
                <p class="commentCount">@count</p>
            </article>
        }
    }
}
